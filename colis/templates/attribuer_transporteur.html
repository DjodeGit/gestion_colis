{% extends 'base.html' %}
{% load widget_tweaks %}

{% block title %}Attribuer un transporteur - ColisExpress{% endblock %}

{% block content %}
<div class="container mx-auto px-4 py-8">
    <h1 class="text-3xl font-bold mb-8">Attribuer un transporteur</h1>
    
    <div class="bg-white rounded-lg shadow-md p-6 max-w-2xl mx-auto">
        <div class="mb-6 p-4 bg-blue-50 rounded-lg">
            <h2 class="text-lg font-semibold mb-2">Informations du colis</h2>
            <p><strong>Code suivi:</strong> {{ colis.code_suivi }}</p>
            <p><strong>Destinataire:</strong> {{ colis.destinataire.nom_complet }}</p>
            <p><strong>Destination:</strong> {{ colis.destinataire.ville }}</p>
        </div>
        
        <form method="post" class="space-y-6">
            {% csrf_token %}
            
            <div>
                <label for="transporteur_id" class="block text-gray-700 mb-2">Sélectionner un transporteur</label>
                <select name="transporteur_id" id="transporteur_id" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                    <option value="">Choisir un transporteur</option>
                    {% for transporteur in transporteurs %}
                    <option value="{{ transporteur.id }}">{{ transporteur.user.username }} - {{ transporteur.entreprise|default:"Indépendant" }} (Capacité: {{ transporteur.capacite }} colis/jour)</option>
                    {% endfor %}
                </select>
            </div>
            
           <!-- <div>
                <label for="date_livraison_prevue" class="block text-gray-700 mb-2">Date de livraison prévue</label>
                <input type="datetime-local" name="date_livraison_prevue" id="date_livraison_prevue" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" required>
            </div>
            
            <div>
                <label for="instructions" class="block text-gray-700 mb-2">Instructions spéciales (optionnel)</label>
                <textarea name="instructions" id="instructions" rows="3" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="Instructions pour le transporteur"></textarea>
            </div>-->
            
            <div class="flex justify-end space-x-4">
                <a href="{% url 'dashboard_agent' %}" class="bg-gray-500 hover:bg-gray-600 text-white px-6 py-2 rounded-lg font-semibold transition">
                    Annuler
                </a>
                <button type="submit" class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg font-semibold transition">
                    <i class="fas fa-truck mr-2"></i> Attribuer
                </button>
            </div>
        </form>
    </div>
</div>
{% endblock %}